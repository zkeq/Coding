---
title: å½’æ¡£ | ä¸€æ¬¾æ”¯æŒæˆªå›¾ä¸­æ–‡ç½‘ç«™çš„ Actions æˆªå›¾å·¥å…·ã€‚
tags: [å½’æ¡£]
categories: [Aç½®é¡¶æ–‡ç« , å·¥å…·]
description: æœ¬ç³»åˆ—æ–‡ç« å°†ä¼šè®°å½•å¯’å‡æœŸé—´çš„å­¦ä¹ è®¡åˆ’ï¼Œä¸»è¦æ˜¯çŸ¥è¯†ç‚¹å’ŒåŒå­¦ä»¬å½“å‰è¿›åº¦çš„æ£€æŸ¥ã€‚
cover: https://socialify.git.ci/zkeq/Python-WebSite-Screenshot/image?description=1&font=Bitter&forks=1&language=1&owner=1&pattern=Plus&stargazers=1&theme=Dark
date: 2022-12-16 21:02:57
---

### å‰è¨€

å› ä¸ºæŸäº›ç‰¹æ®Šçš„éœ€æ±‚ï¼Œæˆ‘æƒ³çœ‹åˆ°æŸä¸ªç½‘ç«™åœ¨è¿‡å»çš„æŸå¤©æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œå°è¯•è¿‡åœ¨ `äº’è”ç½‘æ¡£æ¡ˆé¦†(archive.org) `ä¸Šæœç´¢ï¼Œä½†æ˜¯æ‰¾åˆ°çš„å†…å®¹åªæ˜¯ HTML ä»£ç ï¼Œå› ä¸ºæ˜¯å‰åç«¯åˆ†ç¦»çš„ç½‘ç«™ï¼Œå…¶è¯·æ±‚çš„æ¥å£æ•°æ®å¹¶æ²¡æœ‰è¢«ä¿å­˜ä¸‹æ¥ï¼Œæ‰€ä»¥å¾ˆé—æ†¾ï¼Œä¸¢å¤±äº†æ•°æ®ï¼Œåªèƒ½ä»å¤´æ¥è¿è¡Œï¼Œè¿™æ—¶æˆ‘æƒ³èµ·åŠå¹´å‰å†™è¿‡ä¸€ä¸ª Python æˆªå›¾å°å·¥å…·ï¼Œå› ä¸ºé‚£æ—¶å€™æ˜¯éšæ‰‹å†™çš„ï¼Œä¸»è¦æ˜¯ç»™æœ‹å‹ç”¨çš„ï¼Œæ‰€ä»¥åªç®—æ˜¯ä¸ªåŠæˆå“ï¼Œæ‹¿è¿‡æ¥ç”¨å‘ç°å¹¶ä¸èƒ½è·å–å…¨å°ºå¯¸å±å¹•æˆªå›¾ï¼Œä¸å¤§å¥½ç”¨ï¼Œæ‰€ä»¥è¶ç€è¿™æ¬¡æœºä¼šå°†è¿™ä¸ªå·¥å…·å®Œå–„äº†ä¸€ä¸‹ï¼Œè°ƒäº†ä¸€æ•´å¤©å‚æ•°ï¼Œå¯ä»¥è¯´æ˜¯åœ¨ä¸­æ–‡äº’è”ç½‘ç¤¾åŒºæ¥è¯´ç®—æ˜¯æ¯”è¾ƒå¥½ç”¨çš„äº†ã€‚

å¯¹äºè¿™ä¸ªé¡¹ç›®æˆ‘æœ‰å¦‚ä¸‹åˆ›æ–°ç‚¹ï¼š

1. é‡‡ç”¨ `4` ç§æˆªå›¾æ¨¡å¼å¯è¿›è¡Œ **å…¨å°ºå¯¸æˆªå›¾** æ–¹å¼é€‰æ‹©ï¼Œæœ‰æ»šåŠ¨æˆªå›¾ï¼Œæœ‰æ‹‰é«˜å±å¹•æˆªå›¾
2. æ»šåŠ¨æˆªå›¾æ—¶é‡‡ç”¨ç²¾å‡†åƒç´ æ— ç¼æ‹¼æ¥ï¼Œå¹¶ä¸”åœ¨å°¾é¡µåšäº†ç‰¹æ®Šå¤„ç†ï¼Œä¸ä¼šå‡ºç°å¤šå¤„æ¥ä¸€å—çš„æƒ…å†µ
3. æ”¯æŒè‡ªåŠ¨ç­‰å¾…é¡µé¢åŠ è½½å®Œæˆå’Œå¼ºåˆ¶æˆªå›¾å»¶æ—¶ï¼Œå¯ä»¥è‡ªè¡Œè®¾ç½®ç›¸å…³å‚æ•°ä¿è¯æˆªå›¾çš„å®Œæ•´æ€§
4. é¡¹ç›®é‡‡ç”¨ `Github Actions` é©±åŠ¨ï¼Œä¸€çœ‹ä»“åº“å°±çŸ¥é“å¯ä»¥è·‘ï¼Œå¯ä»¥æ”¾å¿ƒç²˜è´´ä»£ç 
5. åŒæ—¶é‡‡ç”¨ `Actions` æ–¹ä¾¿éƒ¨ç½²ï¼Œ`Fork` `æ”¹å¯†é’¥` å³å¯è¿è¡Œ
6. æœ¬é¡¹ç›®çˆ¬å–å®Œæ•°æ®ä¹‹åä¼šæ”¾å›åŸåˆ†æ”¯ï¼Œå¹¶ä¸”æ”¯æŒå•ä¸ªåŸŸåçš„è¯¦ç»†ä¿ç•™æˆªå›¾æ—¥æœŸ
7. æ”¯æŒå®šæ—¶ï¼Œå…¨è‡ªåŠ¨è§¦å‘

>  ä»“åº“åœ°å€ï¼šhttps://github.com/zkeq/Python-WebSite-Screenshot

### æ— å›¾æ— çœŸç›¸

{% tabs homework %}

<!-- tab www.google.com -->
![](https://img.onmicrosoft.cn/2022-12-16/2022-12-16_09-44-36.png)
<!-- endtab -->

<!-- tab adobe.onmicrosoft.cn -->
![](https://img.onmicrosoft.cn/2022-12-16/2022-12-16_08-24-39.png)
<!-- endtab -->

<!-- tab icodeq.com -->
![](https://img.onmicrosoft.cn/2022-12-16/2022-12-16_08-24-12.png)
<!-- endtab -->

<!-- tab alist.learnonly.xyz -->
![](https://img.onmicrosoft.cn/2022-12-16/2022-12-16_12-10-41.png)
<!-- endtab -->

<!-- tab blog.learnonly.xyz -->
![](https://img.onmicrosoft.cn/2022-12-16/2022-12-16_09-30-31.png)
<!-- endtab -->

<!-- tab github.com -->
![](https://img.onmicrosoft.cn/2022-12-16/2022-12-16_12-13-18.png)
<!-- endtab -->

<!-- tab tuostudy.com -->
![](https://img.onmicrosoft.cn/2022-12-16/2022-12-16_08-25-14.png)
<!-- endtab -->

<!-- tab www.fast.com -->
![](https://img.onmicrosoft.cn/2022-12-16/2022-12-16_11-36-36.png)
<!-- endtab -->

<!-- tab www.youtube.com -->
![](https://img.onmicrosoft.cn/2022-12-16/2022-12-16_12-11-04.png)
<!-- endtab -->

{% endtabs %}


### é¡¹ç›®README

[[![Python-WebSite-Screenshot](https://socialify.git.ci/zkeq/Python-WebSite-Screenshot/image?description=1&font=Bitter&forks=1&language=1&owner=1&pattern=Plus&stargazers=1&theme=Dark)](https://socialify.git.ci/zkeq/Python-WebSite-Screenshot/image?description=1&font=Bitter&forks=1&language=1&owner=1&pattern=Plus&stargazers=1&theme=Dark)](https://github.com/zkeq/Python-WebSite-Screenshot)

> æœ¬é¡¹ç›®æ˜¯ç”± `Python` å†™æˆçš„ç½‘ç«™æˆªå›¾å·¥å…·ã€‚
>
> æ”¯æŒä¸­æ–‡ç½‘ç«™æˆªå›¾ï¼Œè¯¥åŠŸèƒ½ç”± [@valetzx](https://github.com/zkeq/Python-WebSite-Screenshot/pull/1) å¼€å‘ã€‚
#### ä½¿ç”¨æ–¹æ³•

1. åœ¨ list.json ä¸­å¡«å…¥ä½ çš„ç½‘ç«™åˆ—è¡¨ã€‚
2. åœ¨ Github ç”Ÿæˆä¸€ä¸ª TOKEN å¹¶ä¸”èµ‹äºˆ repo æƒé™
3. åœ¨ ç¯å¢ƒå˜é‡ä¸­å¡«å…¥ `MY_GIT_TOKEN`ï¼Œè¯¥ç¯å¢ƒå˜é‡ç”¨äºå°†æˆªå¥½çš„å›¾å†æ¬¡æ”¾å› GitHubã€‚

#### å‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ |
| --- | --- |
| `url` | ç½‘ç«™ç½‘å€ |
| `timeout` | sele æ¨¡å—ä¸­ç­‰å¾…æ—¶é—´ï¼ŒåŠ è½½å‡ºç½‘ç«™åä¼šåœæ­¢ï¼ˆç§’ï¼‰ |
| `real_time_out` | å¼ºåˆ¶ç­‰å¾…æ—¶é—´ï¼Œåœ¨ä¸Šè¿° timeout åä¼‘çœ æ—¶é—´ï¼ˆç§’ï¼‰ |
| `width` | æˆªå›¾å®½åº¦ |
| `height` | æˆªå›¾é«˜åº¦ |
| `daydel` | æˆªå›¾çš„ä¿å­˜æ—¶é—´ï¼ˆå¤©ï¼‰ |
| `full_page` | æ˜¯å¦æˆªå–å…¨å± (å‚æ•°ä¸º `0` æ—¶ï¼Œè¡¨ç¤ºä½¿ç”¨æ‹¼æ¥æ–¹å¼ï¼Œå‚æ•°ä¸º `1` æ—¶ï¼Œè¡¨ç¤ºä½¿ç”¨æ‹‰é«˜è§†çª—æ¨¡å¼ï¼Œå‚æ•°ä¸º `2` æ—¶ï¼Œä¸æˆªå–å…¨å±ï¼Œå‚æ•°ä¸º `3` æ—¶ï¼Œè°ƒç”¨è®¾å¤‡æ¨¡æ‹Ÿæˆª[å®éªŒğŸ§ª ä¸­]) |

### æ€è·¯

- è¿™ä¸ªé¡¹ç›®æˆ‘é¦–å…ˆå†™çš„åªæ˜¯æ‰“å¼€æµè§ˆå™¨ï¼Œç„¶åæˆªå›¾

```python
def get_screenshot(url, width, height, timeout, real_time_out):
    print("æ­£åœ¨åˆå§‹åŒ–æµè§ˆå™¨")
    chrome_options = webdriver.ChromeOptions()
    chrome_options.add_argument('lang=zh_CN.UTF-8')
    chrome_options.add_argument('--headless')
    chrome_options.add_argument('--no-sandbox')
    chrome_options.add_argument('--disable-gpu')
    chrome_options.add_argument('--disable-dev-shm-usage')
    chromedriver = "/usr/bin/chromedriver"
    os.environ["webdriver.chrome.driver"] = chromedriver
    driver = webdriver.Chrome(options=chrome_options, executable_path=chromedriver)
    print("æ­£åœ¨å°è¯•åˆå§‹åŒ–çª—å£å¤§å°ï¼š", url)
    driver.set_window_size(width, height)
    print("æ­£åœ¨è·å–ç½‘é¡µ")
    driver.get(url)
    print("æ­£åœ¨ç­‰å¾…ç½‘é¡µåŠ è½½å®Œæˆ")
    driver.implicitly_wait(timeout)
    time.sleep(real_time_out)
    print("è·å–ç½‘é¡µæˆåŠŸï¼Œæ­£åœ¨æˆªå›¾")
    pic_file = driver.get_screenshot_as_png()
    print("æˆªå›¾æˆåŠŸ")
    driver.quit()
    return pic_file
```

- è¿™é‡Œè¦æ„Ÿè°¢ [@valetzx](https://github.com/zkeq/Python-WebSite-Screenshot/pull/1)  ä»–ä¸ºæœ¬é¡¹ç›®å¢åŠ äº†ä¸­æ–‡è¯­è¨€æ”¯æŒåŠŸèƒ½ã€‚

```yaml
      - name: Install Chinese Support
        run: |
          git pull
          sudo apt-get install language-pack-zh-han*
          sudo apt-get install ttf-mscorefonts-installer
          sudo apt-get install fontconfig
          LANG="zh_CN.UTF-8"
          cp HarmonyOS.ttf /usr/share/fonts/
          sudo chmod 644 /usr/share/fonts/HarmonyOS.ttf
          sudo mkfontscale
          sudo mkfontdir
          sudo fc-cache -fv
          
python add: chrome_options.add_argument('lang=zh_CN.UTF-8')
```

- å°±è¿™æ ·ï¼ŒåŸºæœ¬çš„æˆªå›¾åŠŸèƒ½ç®—æ˜¯å®ç°äº†ï¼Œä¹Ÿå°±æ˜¯è¿›å…¥åˆ°ä»Šå¤©çš„æ­£é¢˜ï¼Œå¦‚ä½•è¿›è¡Œé•¿æˆªå›¾å‘¢ï¼Ÿ

ç»è¿‡æŸ¥é˜…èµ„æ–™ï¼Œå‘ç° `selenium3` ä»¥åŠåç»­ç‰ˆæœ¬å·²å°†æ­¤åŠŸèƒ½åˆ å»

äºæ˜¯æˆ‘æƒ³åˆ°äº†æœ€å®¹æ˜“æƒ³åˆ°çš„æ–¹æ³•ï¼šæˆªå›¾å¤šå¼ ï¼Œç„¶åæ‹¼æ¥

```python
	# æˆªå–ä»£ç 
  while next_scrolled_height < total_height:
        driver.execute_script(f"window.scrollTo(0, {next_scrolled_height});")
        next_scrolled_height += height
        if total_height - scrolled_height < height:
            next_scrolled_height = total_height
        print("æ­£åœ¨æˆªå›¾ï¼š", scrolled_height, next_scrolled_height)
        time.sleep(2)
        pic_file = os.path.join(host_dir, now_time + "|" + str(scrolled_height) + "_"+ str(next_scrolled_height) + ".png")
        scrolled_height += height
        image_path_list.append(pic_file)
        driver.save_screenshot(pic_file)
        page += 1
```

```python
	# æ‹¼æ¥ä»£ç 

  # # ä¿å­˜å›¾ç‰‡
  # new_img.save("new_image.jpg")
  _temp = []
  for i in image_path_list:
    _temp.append(Image.open(i))
    # è£å‰ªå›¾ç‰‡
    for i in range(len(_temp)):
      if i == range(len(_temp))[-1]:
        _temp[i] = _temp[i].crop((0, height - (int(image_path_list[-1].split("|")[-1].split(".")[0].split("_")[-1]) - int(image_path_list[-1].split("|")[-1].split(".")[0].split("_")[0])), _temp[i].width, height  ))
      else:
        _temp[i] = _temp[i].crop((0, 0, _temp[i].width, height))
        # åˆ›å»ºæ–°å›¾åƒ
        new_img = Image.new("RGB", (_temp[0].width, total_height))
        # ç²˜è´´å›¾ç‰‡
        for i in range(len(_temp)):
          new_img.paste(_temp[i], (0, i*height))

          # ä¿å­˜å›¾ç‰‡
          new_img.save(os.path.join(host_dir, now_time + ".png"))
          print("æˆªå›¾æˆåŠŸ")
          driver.quit()
```

å¥½åƒå†™æ³•ä¸å¤§ä¼˜é›…ï¼Œä½†æ˜¯å¯ä»¥æ— ç¼æ‹¼æ¥...

ç¬”è€…åœ¨æ’°å†™æ­¤æ–‡æ—¶ï¼Œæœåˆ°äº†ä¼¼ä¹æ›´ä¸ºä¼˜é›…çš„ä»£ç ï¼Œå¯ä»¥çœ‹çœ‹è¿™ä¸ªï¼š

- [python+seleniumå®ç°ç½‘é¡µå…¨å±æˆªå›¾](https://blog.csdn.net/makesomethings/article/details/111638869)

ä¸Šé¢çš„ä»£ç è°ƒå‚æ•°è°ƒäº†å¥½é•¿æ—¶é—´ï¼Œå¤§åŠå¤©çš„æ—¶é—´è¿‡å»äº†ï¼Œä½†æ˜¯æˆ‘å†™å®Œä¹‹åçªç„¶æƒ³åˆ°ï¼šæ—¢ç„¶æˆ‘å·²ç»æœ‰ä»£ç è·å–åˆ°é¡µé¢çš„æ•´ä½“é«˜åº¦ï¼Œé‚£ä¹ˆæˆ‘ç›´æ¥è®©æµè§ˆå™¨çš„é«˜åº¦ç­‰äºæ‰¾ä¸ªé«˜åº¦ï¼Œä¸å°±æ²¡æœ‰æ»šåŠ¨æ¡äº†ä¹ˆï¼Œè€Œä¸”ä¹Ÿä¸ç”¨æ‹¼æ¥äº†

äºæ˜¯å°±å‘ç°åªè¦æ”¹åŠ¨ä¸¤è¡Œ å°±å¯ä»¥å®ç°...

```python
  driver.set_window_size(width, total_height)
  # æ»šåŠ¨åˆ°åº•éƒ¨
  driver.execute_script(f"window.scrollTo(0, {total_height});")
```

ç¦»è°±ï¼Œä¼¼ä¹å‰é¢çš„å·¥ä½œç™½åšäº†ï¼Ÿé‚£ä¹ˆå¤šç™½å†™äº†ï¼Ÿ

åæ¥å‘ç°ä¸æ˜¯ï¼Œè¿™å¼ æ–¹æ³•æœ‰bugï¼Œä»¥æˆ‘çš„åšå®¢ä¸ºä¾‹ï¼Œä¼šå˜æˆè¿™æ ·ï¼š

<img src="https://img.onmicrosoft.cn/2022-12-16/1c984508c9c762ad7654bb6e70dad46e.jpeg" style="zoom: 7%;" />

ä¹Ÿå°±æ˜¯è¯´å±å¹•è¢«æ‹‰é•¿äº†..ä½†æ˜¯åŒæ—¶èƒŒæ™¯å›¾ç‰‡å› ä¸ºè®¾ç½®äº†æŸä¸ªæ ·å¼ï¼Œä»–ä¹Ÿè¢«æ‹‰é•¿äº†

è¿˜å¥½ï¼Œä¹‹å‰å†™çš„ä»£ç å¹¶æ²¡æœ‰æµªè´¹ï¼Œä¹Ÿå°±æ˜¯è¿™æ—¶å€™æ´¾ä¸Šç”¨åœºäº†

åˆå»æœäº†ä¸€äº›æ–‡ç« ï¼Œå‘ç°è¿˜æœ‰ä¸€ç§ `è®¾å¤‡æ¨¡æ‹Ÿ` çš„æ–¹å¼ï¼Œé‚åˆåŠ ä¸Šï¼š

```python
  driver.execute_cdp_cmd('Emulation.setDeviceMetricsOverride', {'mobile': False, 'width': width, 'height': total_height, 'deviceScaleFactor': 1})
  res = driver.execute_cdp_cmd('Page.captureScreenshot', { 'fromSurface': True})
```

- [æä¾›ä¸€ä¸ªåœ¨Seleniumæˆªç½‘é¡µé•¿å›¾çš„å®ç°](https://blog.csdn.net/qq_35977139/article/details/111552903)

äºæ˜¯å†åŠ ä¸Šç¬¬ä¸€æ¬¡çš„ä¸è¿›è¡Œæ“ä½œå°±æˆªå›¾ï¼Œä¸€å…±æ˜¯å››ç§ï¼Œäºæ˜¯ä¾¿æ•´ç†å¥½ä½œä¸ºä¸€ä¸ªå‚æ•°ä¾›ç”¨æˆ·é€‰æ‹©

é™„ä¸Šå®Œæ•´ä»£ç ï¼š

```python
import os
import json
import time
from urllib.parse import urlparse
import os
import time
from PIL import Image
import base64

from selenium import webdriver


def get_screenshot(url, width, height, timeout, real_time_out, host_dir, full_page):
    print("æ­£åœ¨åˆå§‹åŒ–æµè§ˆå™¨")
    chrome_options = webdriver.ChromeOptions()
    chrome_options.add_argument('lang=zh_CN.UTF-8')
    chrome_options.add_argument('--headless')
    chrome_options.add_argument('--no-sandbox')
    chrome_options.add_argument('--disable-gpu')
    chrome_options.add_argument('--disable-dev-shm-usage')
    chromedriver = "/usr/bin/chromedriver"
    os.environ["webdriver.chrome.driver"] = chromedriver
    driver = webdriver.Chrome(options=chrome_options, executable_path=chromedriver)
    print("æ­£åœ¨å°è¯•åˆå§‹åŒ–çª—å£å¤§å°ï¼š", url)
    driver.set_window_size(width, height)
    print("æ­£åœ¨è·å–ç½‘é¡µ")
    driver.get(url)
    print("æ­£åœ¨ç­‰å¾…ç½‘é¡µåŠ è½½å®Œæˆ")
    driver.implicitly_wait(timeout)
    time.sleep(real_time_out)
    print("è·å–ç½‘é¡µæˆåŠŸï¼Œæ­£åœ¨æˆªå›¾")

    # è·å–é¡µé¢æ€»é«˜åº¦
    total_height = driver.execute_script("return Math.max( document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight)")
    

    if full_page != 0:
        now_time = time.strftime("%Y-%m-%d_%H-%M-%S", time.localtime())
        pic_file = os.path.join(host_dir, now_time + ".png")
        if full_page == 3:
            print("ï½œï¼ï¼ï¼ï¼ï¼ï½œé‡‡ç”¨è®¾å¤‡æ¨¡æ‹Ÿæˆªå›¾æ¨¡å¼")
            # ç›´æ¥å¼€å¯è®¾å¤‡æ¨¡æ‹Ÿï¼Œä¸è¦å†æ‰‹åŠ¨å¼€devtoolsäº†ï¼Œå¦åˆ™æˆªå›¾æˆªçš„æ˜¯devtoolsçš„ç•Œé¢ï¼
            driver.execute_cdp_cmd('Emulation.setDeviceMetricsOverride', {'mobile': False, 'width': width, 'height': total_height, 'deviceScaleFactor': 1})
            # æ‰§è¡Œæˆªå›¾
            res = driver.execute_cdp_cmd('Page.captureScreenshot', { 'fromSurface': True})
            # è¿”å›çš„base64å†…å®¹å†™å…¥PNGæ–‡ä»¶
            with open(pic_file, 'wb') as f:
                img = base64.b64decode(res['data'])
                f.write(img)
            driver.quit()
            return None

        if full_page == 1:
            print("ï½œï¼ï¼ï¼ï¼ï¼ï½œé‡‡ç”¨æ‹‰é«˜è§†çª—æˆªå›¾æ¨¡å¼")
            driver.set_window_size(width, total_height)
            # æ»šåŠ¨åˆ°åº•éƒ¨
            driver.execute_script(f"window.scrollTo(0, {total_height});")
        else:
            print("ï½œï¼ï¼ï¼ï¼ï¼ï½œä¸è¿›è¡Œä»»ä½•æ“ä½œï¼Œç›´æ¥æˆªå›¾")
        # æˆªå›¾
        driver.save_screenshot(pic_file)
        driver.quit()
        return None


    print("ï½œï¼ï¼ï¼ï¼ï¼ï½œé‡‡ç”¨æ»šåŠ¨æˆªå›¾æ¨¡å¼")    
    scrolled_height = 0
    next_scrolled_height = 0
    print("é¡µé¢æ€»é«˜åº¦ï¼š", total_height)
    now_time = time.strftime("%Y-%m-%d_%H-%M-%S", time.localtime())
    image_path_list = []
    page = 1
    # æ»šåŠ¨é¡µé¢
    while next_scrolled_height < total_height:
        driver.execute_script(f"window.scrollTo(0, {next_scrolled_height});")
        next_scrolled_height += height
        if total_height - scrolled_height < height:
            next_scrolled_height = total_height
        print("æ­£åœ¨æˆªå›¾ï¼š", scrolled_height, next_scrolled_height)
        time.sleep(2)
        pic_file = os.path.join(host_dir, now_time + "|" + str(scrolled_height) + "_"+ str(next_scrolled_height) + ".png")
        scrolled_height += height
        image_path_list.append(pic_file)
        driver.save_screenshot(pic_file)
        page += 1
    
    # # æ‰“å¼€å›¾ç‰‡
    # img1 = Image.open("0_1080.png")
    # img2 = Image.open("1080_2160.png")
    # img3 = Image.open("2160_3240.png")
    # img4 = Image.open("3240_4000.png")

    # # è£å‰ªå›¾ç‰‡
    # cropped_img1 = img1.crop((0, 0, img1.width, 1080))
    # cropped_img2 = img2.crop((0, 0, img2.width, 1080))
    # cropped_img3 = img3.crop((0, 0, img3.width, 1080))
    # cropped_img4 = img4.crop((0, 0, img4.width, 760))

    # # åˆ›å»ºæ–°å›¾åƒ
    # new_img = Image.new("RGB", (img1.width, 4000))

    # # ç²˜è´´å›¾ç‰‡
    # new_img.paste(cropped_img1, (0, 0))
    # new_img.paste(cropped_img2, (0, 1080))
    # new_img.paste(cropped_img3, (0, 2160))
    # new_img.paste(cropped_img4, (0, 3240))

    # # ä¿å­˜å›¾ç‰‡
    # new_img.save("new_image.jpg")
    _temp = []
    for i in image_path_list:
        _temp.append(Image.open(i))
    # è£å‰ªå›¾ç‰‡
    for i in range(len(_temp)):
        if i == range(len(_temp))[-1]:
            _temp[i] = _temp[i].crop((0, height - (int(image_path_list[-1].split("|")[-1].split(".")[0].split("_")[-1]) - int(image_path_list[-1].split("|")[-1].split(".")[0].split("_")[0])), _temp[i].width, height  ))
        else:
            _temp[i] = _temp[i].crop((0, 0, _temp[i].width, height))
     # åˆ›å»ºæ–°å›¾åƒ
    new_img = Image.new("RGB", (_temp[0].width, total_height))
    # ç²˜è´´å›¾ç‰‡
    for i in range(len(_temp)):
        new_img.paste(_temp[i], (0, i*height))
        
    # ä¿å­˜å›¾ç‰‡
    new_img.save(os.path.join(host_dir, now_time + ".png"))
    print("æˆªå›¾æˆåŠŸ")
    driver.quit()


# è¯»å–list.jsonæ–‡ä»¶
with open("list.json", "r") as f:
    data = json.load(f)

for i in data:
    # è·å–url
    url = i["url"]
    timeout = i["timeout"]
    # è·å–å®½åº¦å’Œé«˜åº¦
    width = i["width"]
    height = i["height"]
    real_time_out = i["real_time_out"]
    full_page = i["full_page"]
    # å†™å…¥æ–‡ä»¶
    host = urlparse(url).netloc
    host_dir = os.path.join("save", host)
    if not os.path.exists(host_dir):
        os.mkdir(host_dir)
    get_screenshot(url, width, height, timeout, real_time_out, host_dir, full_page)
```

### ä¸€äº›å…¶ä»–çš„æœ¬æ–‡æœªæåŠçš„ç›¸å…³èµ„æ–™

ç¬”è€…åªæ˜¯çœ‹åˆ°è¿™äº›ï¼Œå¹¶æœªå…¨éƒ¨éªŒè¯å¯è¡Œæ€§ï¼Œæ„Ÿè°¢æ‰€æœ‰ä¸ºä¸­æ–‡ç¼–ç¨‹åŒºåšå‡ºæ•™ç¨‹çš„åšä¸»ï¼

- [seleniumè¿›è¡Œç½‘é¡µé•¿æˆªå›¾ï¼Œæ¨¡å—é•¿æˆªå›¾](https://blog.csdn.net/Zhong____/article/details/127258151)
- [Seleniumæ‰§è¡Œcdpå‘½ä»¤ï¼Œdriver.execute_cdp_cmdç”¨æ³•](https://www.cnblogs.com/superhin/p/11481910.html)
- [ä½¿ç”¨seleniumç½‘é¡µæˆªå›¾ï¼Œè§£å†³æˆªå›¾ä¸å…¨é—®é¢˜](https://blog.csdn.net/muttry/article/details/114577445)
- [Seleniumå…¨å±æˆªå›¾ï¼Œä½¿ç”¨PILæ‹¼æ¥æ»šåŠ¨æˆªå›¾](https://www.cnblogs.com/superhin/p/11482188.html)
- [Python seleniumæ“ä½œæµè§ˆå™¨å…¨å±æˆªå›¾](https://blog.csdn.net/komany2010/article/details/108638913)
- [ä½¿ç”¨Selenium Webdriverè¿›è¡Œå…¨å±æˆªå›¾](https://blog.csdn.net/dnc8371/article/details/106809193)
- [seleniumä¸­æ•´ä¸ªé¡µé¢çš„æˆªå›¾åŠå±€éƒ¨æˆªå›¾ï¼ˆæ–¹æ³•åˆ†æï¼‰](https://blog.csdn.net/weixin_45541762/article/details/115526509)
- [python+selenium æŠŠæ•´ä¸ªç½‘é¡µæˆªå›¾ é•¿æˆªå›¾](https://blog.csdn.net/yutu75/article/details/115524985)
- [selenium æˆªé•¿å›¾](https://blog.csdn.net/yechunyao/article/details/125450825)
